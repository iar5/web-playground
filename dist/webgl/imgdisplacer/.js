!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=37)}({2:function(t,e,n){"use strict";function r(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function o(t,e,n){return"#"+r(t)+r(e)+r(n)}function i(t,e){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)}function a(t){return t*Math.PI/180}function u(){let t=!1;var e;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function c(t,e,n){return t+(e-t)*n}function l(t,e){let n=new Image;n.src=t,n.onload=()=>e(n)}function s(t,e,n){const r=document.createElement("canvas");r.width=e,r.height=n;const o=r.getContext("2d");o.drawImage(t,0,0,e,n);return o.getImageData(0,0,e,n).data}function d(t,e,n){return Math.min(Math.max(t,e),n)}n.r(e),n.d(e,"componentToHex",(function(){return r})),n.d(e,"rgbToHex",(function(){return o})),n.d(e,"resize",(function(){return i})),n.d(e,"degToRad",(function(){return a})),n.d(e,"isMobile",(function(){return u})),n.d(e,"lerp",(function(){return c})),n.d(e,"loadImage",(function(){return l})),n.d(e,"getImageData",(function(){return s})),n.d(e,"clamp",(function(){return d}))},37:function(t,e,n){"use strict";n.r(e);var r={create:function(t){var e=new Float32Array(9);return t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9]),e},set:function(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(!e||t==e){var n=t[1],r=t[2],o=t[5];return t[1]=t[3],t[2]=t[6],t[3]=n,t[5]=t[7],t[6]=r,t[7]=o,t}return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e},toMat4:function(t,e){return e||(e=o.create()),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0,e[4]=t[3],e[5]=t[4],e[6]=t[5],e[7]=0,e[8]=t[6],e[9]=t[7],e[10]=t[8],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+"]"}},o={create:function(t){var e=new Float32Array(16);return t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e},set:function(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,e){if(!e||t==e){var n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],u=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=n,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=i,t[11]=t[14],t[12]=o,t[13]=a,t[14]=u,t}return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e},determinant:function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],c=t[7],l=t[8],s=t[9],d=t[10],m=t[11],f=t[12],h=t[13],v=t[14];return f*s*u*o-l*h*u*o-f*a*d*o+i*h*d*o+l*a*v*o-i*s*v*o-f*s*r*c+l*h*r*c+f*n*d*c-e*h*d*c-l*n*v*c+e*s*v*c+f*a*r*m-i*h*r*m-f*n*u*m+e*h*u*m+i*n*v*m-e*a*v*m-l*a*r*(t=t[15])+i*s*r*t+l*n*u*t-e*s*u*t-i*n*d*t+e*a*d*t},inverse:function(t,e){e||(e=t);var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=t[6],l=t[7],s=t[8],d=t[9],m=t[10],f=t[11],h=t[12],v=t[13],g=t[14],p=t[15],b=n*u-r*a,x=n*c-o*a,E=n*l-i*a,w=r*c-o*u,M=r*l-i*u,T=o*l-i*c,A=s*v-d*h,y=s*g-m*h,R=s*p-f*h,_=d*g-m*v,k=d*p-f*v,S=m*p-f*g,I=1/(b*S-x*k+E*_+w*R-M*y+T*A);return e[0]=(u*S-c*k+l*_)*I,e[1]=(-r*S+o*k-i*_)*I,e[2]=(v*T-g*M+p*w)*I,e[3]=(-d*T+m*M-f*w)*I,e[4]=(-a*S+c*R-l*y)*I,e[5]=(n*S-o*R+i*y)*I,e[6]=(-h*T+g*E-p*x)*I,e[7]=(s*T-m*E+f*x)*I,e[8]=(a*k-u*R+l*A)*I,e[9]=(-n*k+r*R-i*A)*I,e[10]=(h*M-v*E+p*b)*I,e[11]=(-s*M+d*E-f*b)*I,e[12]=(-a*_+u*y-c*A)*I,e[13]=(n*_-r*y+o*A)*I,e[14]=(-h*w+v*x-g*b)*I,e[15]=(s*w-d*x+m*b)*I,e},toRotationMat:function(t,e){return e||(e=o.create()),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},toMat3:function(t,e){return e||(e=r.create()),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},toInverseMat3:function(t,e){var n=t[0],o=t[1],i=t[2],a=t[4],u=t[5],c=t[6],l=t[8],s=t[9],d=t[10],m=d*u-c*s,f=-d*a+c*l,h=s*a-u*l,v=n*m+o*f+i*h;return v?(v=1/v,e||(e=r.create()),e[0]=m*v,e[1]=(-d*o+i*s)*v,e[2]=(c*o-i*u)*v,e[3]=f*v,e[4]=(d*n-i*l)*v,e[5]=(-c*n+i*a)*v,e[6]=h*v,e[7]=(-s*n+o*l)*v,e[8]=(u*n-o*a)*v,e):null},multiply:function(t,e,n){n||(n=t);var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],c=t[5],l=t[6],s=t[7],d=t[8],m=t[9],f=t[10],h=t[11],v=t[12],g=t[13],p=t[14];t=t[15];var b=e[0],x=e[1],E=e[2],w=e[3],M=e[4],T=e[5],A=e[6],y=e[7],R=e[8],_=e[9],k=e[10],S=e[11],I=e[12],P=e[13],B=e[14];return e=e[15],n[0]=b*r+x*u+E*d+w*v,n[1]=b*o+x*c+E*m+w*g,n[2]=b*i+x*l+E*f+w*p,n[3]=b*a+x*s+E*h+w*t,n[4]=M*r+T*u+A*d+y*v,n[5]=M*o+T*c+A*m+y*g,n[6]=M*i+T*l+A*f+y*p,n[7]=M*a+T*s+A*h+y*t,n[8]=R*r+_*u+k*d+S*v,n[9]=R*o+_*c+k*m+S*g,n[10]=R*i+_*l+k*f+S*p,n[11]=R*a+_*s+k*h+S*t,n[12]=I*r+P*u+B*d+e*v,n[13]=I*o+P*c+B*m+e*g,n[14]=I*i+P*l+B*f+e*p,n[15]=I*a+P*s+B*h+e*t,n},multiplyVec3:function(t,e,n){n||(n=e);var r=e[0],o=e[1];return e=e[2],n[0]=t[0]*r+t[4]*o+t[8]*e+t[12],n[1]=t[1]*r+t[5]*o+t[9]*e+t[13],n[2]=t[2]*r+t[6]*o+t[10]*e+t[14],n},multiplyVec4:function(t,e,n){n||(n=e);var r=e[0],o=e[1],i=e[2];return e=e[3],n[0]=t[0]*r+t[4]*o+t[8]*i+t[12]*e,n[1]=t[1]*r+t[5]*o+t[9]*i+t[13]*e,n[2]=t[2]*r+t[6]*o+t[10]*i+t[14]*e,n[3]=t[3]*r+t[7]*o+t[11]*i+t[15]*e,n},translate:function(t,e,n){var r=e[0],o=e[1];if(e=e[2],!n||t==n)return t[12]=t[0]*r+t[4]*o+t[8]*e+t[12],t[13]=t[1]*r+t[5]*o+t[9]*e+t[13],t[14]=t[2]*r+t[6]*o+t[10]*e+t[14],t[15]=t[3]*r+t[7]*o+t[11]*e+t[15],t;var i=t[0],a=t[1],u=t[2],c=t[3],l=t[4],s=t[5],d=t[6],m=t[7],f=t[8],h=t[9],v=t[10],g=t[11];return n[0]=i,n[1]=a,n[2]=u,n[3]=c,n[4]=l,n[5]=s,n[6]=d,n[7]=m,n[8]=f,n[9]=h,n[10]=v,n[11]=g,n[12]=i*r+l*o+f*e+t[12],n[13]=a*r+s*o+h*e+t[13],n[14]=u*r+d*o+v*e+t[14],n[15]=c*r+m*o+g*e+t[15],n},scale:function(t,e,n){var r=e[0],o=e[1];return e=e[2],n&&t!=n?(n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*o,n[5]=t[5]*o,n[6]=t[6]*o,n[7]=t[7]*o,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n):(t[0]*=r,t[1]*=r,t[2]*=r,t[3]*=r,t[4]*=o,t[5]*=o,t[6]*=o,t[7]*=o,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e,t)},rotate:function(t,e,n,r){var o=n[0],i=n[1];n=n[2];var a=Math.sqrt(o*o+i*i+n*n);if(!a)return null;1!=a&&(o*=a=1/a,i*=a,n*=a);var u=Math.sin(e),c=Math.cos(e),l=1-c;e=t[0],a=t[1];var s=t[2],d=t[3],m=t[4],f=t[5],h=t[6],v=t[7],g=t[8],p=t[9],b=t[10],x=t[11],E=o*o*l+c,w=i*o*l+n*u,M=n*o*l-i*u,T=o*i*l-n*u,A=i*i*l+c,y=n*i*l+o*u,R=o*n*l+i*u;return o=i*n*l-o*u,i=n*n*l+c,r?t!=r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]):r=t,r[0]=e*E+m*w+g*M,r[1]=a*E+f*w+p*M,r[2]=s*E+h*w+b*M,r[3]=d*E+v*w+x*M,r[4]=e*T+m*A+g*y,r[5]=a*T+f*A+p*y,r[6]=s*T+h*A+b*y,r[7]=d*T+v*A+x*y,r[8]=e*R+m*o+g*i,r[9]=a*R+f*o+p*i,r[10]=s*R+h*o+b*i,r[11]=d*R+v*o+x*i,r},rotateX:function(t,e,n){var r=Math.sin(e);e=Math.cos(e);var o=t[4],i=t[5],a=t[6],u=t[7],c=t[8],l=t[9],s=t[10],d=t[11];return n?t!=n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[4]=o*e+c*r,n[5]=i*e+l*r,n[6]=a*e+s*r,n[7]=u*e+d*r,n[8]=o*-r+c*e,n[9]=i*-r+l*e,n[10]=a*-r+s*e,n[11]=u*-r+d*e,n},rotateY:function(t,e,n){var r=Math.sin(e);e=Math.cos(e);var o=t[0],i=t[1],a=t[2],u=t[3],c=t[8],l=t[9],s=t[10],d=t[11];return n?t!=n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=o*e+c*-r,n[1]=i*e+l*-r,n[2]=a*e+s*-r,n[3]=u*e+d*-r,n[8]=o*r+c*e,n[9]=i*r+l*e,n[10]=a*r+s*e,n[11]=u*r+d*e,n},rotateZ:function(t,e,n){var r=Math.sin(e);e=Math.cos(e);var o=t[0],i=t[1],a=t[2],u=t[3],c=t[4],l=t[5],s=t[6],d=t[7];return n?t!=n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=o*e+c*r,n[1]=i*e+l*r,n[2]=a*e+s*r,n[3]=u*e+d*r,n[4]=o*-r+c*e,n[5]=i*-r+l*e,n[6]=a*-r+s*e,n[7]=u*-r+d*e,n},frustum:function(t,e,n,r,i,a,u){u||(u=o.create());var c=e-t,l=r-n,s=a-i;return u[0]=2*i/c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*i/l,u[6]=0,u[7]=0,u[8]=(e+t)/c,u[9]=(r+n)/l,u[10]=-(a+i)/s,u[11]=-1,u[12]=0,u[13]=0,u[14]=-a*i*2/s,u[15]=0,u},perspective:function(t,e,n,r,i){return e*=t=n*Math.tan(t*Math.PI/360),o.frustum(-e,e,-t,t,n,r,i)},ortho:function(t,e,n,r,i,a,u){u||(u=o.create());var c=e-t,l=r-n,s=a-i;return u[0]=2/c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/l,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=-2/s,u[11]=0,u[12]=-(t+e)/c,u[13]=-(r+n)/l,u[14]=-(a+i)/s,u[15]=1,u},lookAt:function(t,e,n,r){r||(r=o.create());var i=t[0],a=t[1];t=t[2];var u=n[0],c=n[1],l=n[2];n=e[1];var s,d,m,f,h=e[2];return i==e[0]&&a==n&&t==h?o.identity(r):(n=i-e[0],h=a-e[1],e=t-e[2],s=c*(e*=f=1/Math.sqrt(n*n+h*h+e*e))-l*(h*=f),l=l*(n*=f)-u*e,u=u*h-c*n,(f=Math.sqrt(s*s+l*l+u*u))?(s*=f=1/f,l*=f,u*=f):u=l=s=0,c=h*u-e*l,d=e*s-n*u,m=n*l-h*s,(f=Math.sqrt(c*c+d*d+m*m))?(c*=f=1/f,d*=f,m*=f):m=d=c=0,r[0]=s,r[1]=c,r[2]=n,r[3]=0,r[4]=l,r[5]=d,r[6]=h,r[7]=0,r[8]=u,r[9]=m,r[10]=e,r[11]=0,r[12]=-(s*i+l*a+u*t),r[13]=-(c*i+d*a+m*t),r[14]=-(n*i+h*a+e*t),r[15]=1,r)},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+"]"}},i=n(2),a=n(7);const u=o.create();var c={activeMouseAndTouchAxis:[1,1],enableMouse:!0,enableTouch:!0,enableOrientation:!1,initialOrientation:null,setupMouseControl(t,e){var n,r,o=!1;t.onmousedown=t=>{o=!0,n=t.clientX,r=t.clientY},t.onmousemove=t=>{if(!this.enableMouse)return;if(!o)return;let i=t.clientX,a=t.clientY;this.rotateByValues(e,n-i,r-a),n=i,r=a},t.onmouseup=function(){o=!1},t.onmouseout=function(){o=!1}},setupTouchControl(t,e){var n,r,o=!1;t.ontouchstart=t=>{o=!0,n=t.touches[0].pageX,r=t.touches[0].pageY},t.ontouchmove=t=>{if(!this.enableTouch)return;if(!o)return;let i=t.touches[0].pageX,a=t.touches[0].pageY;this.rotateByValues(e,n-i,r-a),n=i,r=a},t.ontouchend=t=>{o=!1}},setupOrientationControl(t,e){window.addEventListener("deviceorientation",t=>{if(!this.enableOrientation)return;let n=t.gamma,r=t.beta;null==this.initialOrientation&&(this.initialOrientation=[n,r]),this.rotateByValues(e,this.initialOrientation[0]-n,this.initialOrientation[1]-r)})},rotateByValues(t,e,n){let r=o.identity(u);this.activeMouseAndTouchAxis[0]&&o.rotate(r,Object(i.degToRad)(e/5),[0,1,0]),this.activeMouseAndTouchAxis[1]&&o.rotate(r,Object(i.degToRad)(n/5),[1,0,0]),o.multiply(r,t,t)}};const l=new function(t,e,n=.4){const r=t,u=r.getContext("webgl2");u.enable(u.DEPTH_TEST),u.clearColor(1,1,1,1),u.getExtension("OES_element_index_uint");const l={projectionMatrix:o.create(),modelViewMatix:o.identity(o.create())},s={lastTick:0,enabled:!0,rotationValues:[-.2,1,0],depth:1};c.setupMouseControl(r,l.modelViewMatix),c.setupTouchControl(r,l.modelViewMatix),c.setupOrientationControl(r,l.modelViewMatix),window.addEventListener("resize",v);const d=Object(a.b)(u,"\nprecision highp float;\n\nattribute vec3 vertexPosition;\nattribute vec4 vertexColor;\n\nuniform mat4 mvMatrix;\nuniform mat4 pMatrix;\nuniform float depth;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n    float z = vertexPosition.z * depth;\n\n    gl_Position = pMatrix * mvMatrix * vec4(vertexPosition.x, vertexPosition.y, z, 1.0);\n    vColor = vertexColor;\n}\n","\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n    gl_FragColor = vColor;\n}\n"),m=u.createBuffer(),f=u.createBuffer(),h=u.createBuffer();function v(){r.width=r.offsetWidth,r.height=r.offsetHeight;let t=r.width/r.height;o.ortho(-1*t,1*t,-1,1,10,-10,l.projectionMatrix),u.viewport(0,0,r.width,r.height)}function g(t){let e=r.width/r.height,o=t.naturalWidth,a=t.naturalHeight;o>a?(a=500*a/o,a=Math.round(a),o=500):(o=500*o/a,o=Math.round(o),a=500);const c=(o/a>e?2/o:2/a)*n,l=Object(i.getImageData)(t,o,a),s=Array.from(l).map(t=>t/255);var v=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let t=0;t<s.length;t+=4){let e=p(s[t],s[t+1],s[t+2]);e<v&&(v=e),e>g&&(g=e)}const b=(g+v)/2,x=g-v,E=[];for(let t=a;t>0;t--)for(let e=0;e<o;e++){let n=4*((a-t)*o+e);E.push((.5+e-o/2)*c,(.5+t-a/2)*c,(p(s[n],s[n+1],s[n+2])-b)/x*.5)}!function(t,e,n){m.itemSize=4,m.numItems=e.length/4,u.bindBuffer(u.ARRAY_BUFFER,m),u.bufferData(u.ARRAY_BUFFER,new Float32Array(e),u.STATIC_DRAW),u.vertexAttribPointer(d.vertexColorAttribute,m.itemSize,u.FLOAT,!1,0,0),f.itemSize=3,f.numItems=t.length/3,u.bindBuffer(u.ARRAY_BUFFER,f),u.bufferData(u.ARRAY_BUFFER,new Float32Array(t),u.STATIC_DRAW),u.vertexAttribPointer(d.vertexPositionAttribute,f.itemSize,u.FLOAT,!1,0,0),h.itemSize=1,h.numItems=n.length,u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,h),u.bufferData(u.ELEMENT_ARRAY_BUFFER,new Uint32Array(n),u.STATIC_DRAW)}(E,s,function(t,e){var n=[];for(let r=0;r<e-1;r++){0!=r&&n.push(r*t);for(let e=0;e<t;e++)n.push(r*t+e),n.push((r+1)*t+e);r!=t-2&&n.push((r+1)*t+(t-1))}return n}(o,a))}function p(t,e,n){return-Math.sqrt(t*t+e*e+n*n)}d.depth=u.getUniformLocation(d,"depth"),d.pMatrixUniform=u.getUniformLocation(d,"pMatrix"),d.mvMatrixUniform=u.getUniformLocation(d,"mvMatrix"),d.vertexColorAttribute=u.getAttribLocation(d,"vertexColor"),d.vertexPositionAttribute=u.getAttribLocation(d,"vertexPosition"),u.enableVertexAttribArray(d.vertexColorAttribute),u.enableVertexAttribArray(d.vertexPositionAttribute),Object(i.loadImage)(e,t=>{v(),g(t),function t(){if(b)return;requestAnimationFrame(()=>t()),s.enabled&&function(){let t=Date.now();0==s.lastTick&&(l.startStamp=t,s.lastTick=t);let e=t-s.lastTick;s.lastTick=t;let n=Object(i.degToRad)(e/100);o.rotate(l.modelViewMatix,n*s.rotationValues[0],[1,0,0]),o.rotate(l.modelViewMatix,n*s.rotationValues[1],[0,1,0]),o.rotate(l.modelViewMatix,n*s.rotationValues[2],[0,0,1])}();u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.uniformMatrix4fv(d.pMatrixUniform,!1,l.projectionMatrix),u.uniformMatrix4fv(d.mvMatrixUniform,!1,l.modelViewMatix),u.uniform1f(d.depth,s.depth),u.drawElements(u.TRIANGLE_STRIP,h.numItems,u.UNSIGNED_INT,0)}()});var b=!1;return{updateImage(t){Object(i.loadImage)(t,t=>g(t))},setRotationParameters(t,e,n){null!=t&&(s.rotationValues[0]=t),null!=e&&(s.rotationValues[1]=e),null!=n&&(s.rotationValues[2]=n)},setDepth(t){s.depth=t},setControleAxis(t,e){c.activeMouseAndTouchAxis=[t,e]},resetView(){this.setRotationParameters(0,0,0),s.depth=1,o.identity(l.modelViewMatix),c.initialOrientation=null},enableMouseAndTouchControle(t){c.enableMouse=t,c.enableTouch=t},enableOrientationControle(t){s.enabled=!t,c.enableMouse=!t,c.enableTouch=!t,c.enableOrientation=t,s.lastTick=Date.now(),c.initialOrientation=null},toggleDepthTest(t){(t|=!u.isEnabled(u.DEPTH_TEST))?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST)},getParameters:()=>({depth:s.depth,rotations:[...s.rotationValues],depthTestEnabled:u.isEnabled(u.DEPTH_TEST),orientationControleEnabled:c.enableOrientation}),destroyGl(){b=!0,Object(a.c)(u)}}}(document.getElementById("canvas"),"./example.png"),s=document.getElementById("file");function d(){let t=l.getParameters();rx.value=t.rotations[0],ry.value=t.rotations[1],rz.value=t.rotations[2],depth.value=t.depth,checkboxDepthTest.checked=t.depthTestEnabled,checkboxOrientationControle.checked=t.orientationControleEnabled}s.onchange=function(t){let e=s.files[0];if(e){var n=new FileReader;n.addEventListener("load",()=>{l.updateImage(n.result)},!1),n.readAsDataURL(e)}},d(),document.getElementById("rx").addEventListener("change",t=>l.setRotationParameters(t.target.value,void 0,void 0)),document.getElementById("ry").addEventListener("change",t=>l.setRotationParameters(void 0,t.target.value,void 0)),document.getElementById("rz").addEventListener("change",t=>l.setRotationParameters(void 0,void 0,t.target.value)),document.getElementById("depth").addEventListener("input",t=>l.setDepth(t.target.value)),document.getElementById("resetButton").addEventListener("click",t=>(l.resetView(),void d())),document.getElementById("toggleView").addEventListener("click",()=>document.getElementsByTagName("header")[0].classList.toggle("closed")),document.getElementById("checkboxDepthTest").addEventListener("click",t=>l.toggleDepthTest(t.target.checked)),document.getElementById("checkboxOrientationControle").addEventListener("click",t=>l.enableOrientationControle(t.target.checked))},7:function(t,e,n){"use strict";function r(t,e){const n=new XMLHttpRequest;n.open("GET",t+"?please-dont-cache="+Math.random(),!0),n.onload=function(){e(n.responseText)},n.send()}function o(){return!!document.createElement("canvas").getContext("webgl2")}function i(t,e,n){const r=t.createProgram();let o=t.createShader(t.VERTEX_SHADER);t.shaderSource(o,e),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)||console.log(t.getShaderInfoLog(o)),t.attachShader(r,o);let i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)||console.log(t.getShaderInfoLog(i)),t.attachShader(r,i),t.linkProgram(r),t.useProgram(r),r}function a(t,e,n,o){r(e,e=>{r(n,n=>{const r=i(t,e,n);o(r)})})}function u(t){t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.canvas.width=1,t.canvas.height=1,t.getExtension("WEBGL_lose_context").loseContext()}n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return u}))}});
//# sourceMappingURL=.js.map